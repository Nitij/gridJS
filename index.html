<!doctype html>
<html>
<head>
    <title>gridJS</title>
    <script type="text/javascript" src="Scripts\jQuery.js"></script>
    <script type="text/javascript" src="Scripts\grid.main.js"></script>
    <script type="text/javascript" src="Scripts\validate.main.js"></script>
    <script type="text/javascript" src="Scripts\sampleData.js"></script>
    <script type="text/javascript" src="Scripts\sampleNorthWindData.js"></script>
    <script type="text/javascript" src="Scripts\sampleCountryData.js"></script>
    <script type="text/javascript" src="Scripts\sampleShoppingData.js"></script>

    <link rel="stylesheet" href="Style/style.css" />
</head>
<body>
    <div id="divTodoGrid" style="text-align: center; width: 100%;">
        <input class="CustomText" id="txtTodo" type="text" placeholder="add new todo here" />
        <input type="submit" value="Add Todo" onclick="AddTodo(); return false;" />
        <input type="submit" value="Clear" onclick="ClearAllTodo(); return false;" />
        <br />
        <gridjs id="todoGrid" class="TodoGrid">
            <headerRow>
            </headerRow>
            <dataRow class="GridDataRow">
                <column class="todoGridStatusCol"><input id="chkStatus" type="checkbox" model="{{done}}" /></column>
                <column class="todoGridTextCol"><span class="TodoText{{GetTodoStatus()}}">{{title}}</span></column>
            </dataRow>
            <footerRow>
            </footerRow>
        </gridjs>
    </div>
    <br />
    <br />
    <div id="divCountryGrid" style="text-align: center; width: 100%;">
        <gridjs id="gridCountry" class="CountryGrid">
            <headerRow class="CountryGridHeaderRow">
                <column><b>Name</b></column>
                <column><b>Capital</b></column>
                <column><b>Area</b></column>
                <column><b>Population</b></column>
                <column><b>Official Flag</b></column>
            </headerRow>
            <dataRow class="CountryGridRow">
                <column>{{name}}</column>
                <column>{{capital}}</column>
                <column>{{area}}</column>
                <column>{{population}}</column>
                <column><img model-src="Images/{{flag}}" height="60px" width="100px" /></column>
            </dataRow>
            <footerRow>
            </footerRow>
        </gridjs>
    </div>
    <br />
    <br />
    <div id="divNorthWindGrid" style="text-align: center; width: 100%;">
        <gridjs id="gridNorthWind" class="NorthWindGrid">
            <headerRow class="NorthWindGridHeaderRow">
                <column><b>Order ID</b></column>
                <column><b>Customer ID</b></column>
                <column><b>Emp ID</b></column>
                <column><b>Order Date</b></column>
                <column><b>Shipped Date</b></column>
                <column><b>Freight</b></column>
                <column><b>Ship Name</b></column>
                <column><b>Ship City</b></column>
                <column><b>Ship Postal Code</b></column>
                <column><b>Ship Country</b></column>
            </headerRow>
            <dataRow class="NorthWindGridRow">
                <column>{{OrderID}}</column>
                <column>{{CustomerID}}</column>
                <column>{{EmployeeID}}</column>
                <column>{{GetOrderDate()}}</column>
                <column>{{GetShippedDate()}}</column>
                <column>{{Freight}}</column>
                <column>{{ShipName}}</column>
                <column>{{ShipCity}}</column>
                <column>{{ShipPostalCode}}</column>
                <column>{{ShipCountry}}</column>                
            </dataRow>
            <footerRow>
            </footerRow>
        </gridjs>
    </div>
    <br />
    <br />
    <div id="divShoppingGrid" style="text-align: center; width: 100%;">
        <gridjs id="gridShopping" class="ShoppingGrid">
            <headerRow>
            </headerRow>
            <dataRow>
                <column>
                    <table>
                        <tr>
                            <td class="ShoppingLeftCol">
                                <img model-src="Images\{{image}}" height="400px" />
                            </td>
                            <td class="ShoppingRightCol">
                                <span class="ShoppingItemHeading">{{name}}</span>
                                <br />
                                <img model-src="Images\{{rating}}star.png" height="35px" />
                                <br />
                                <table cellpadding="12px">
                                    <tr>
                                        <td class="ShoppingPriceCol">
                                            <span class="PriceWithoutDiscount">Rs. {{price}}</span>
                                            <br />
                                            <span class="ShoppingPrice">Rs. {{PriceAfterDiscount()}}</span>                        
                                            <br />
                                            Inclusive of taxes
                                            <br /><br />
                                            <b>Discount:</b> {{discount}}%
                                            <br /><br />
                                            Free home delivery
                                        </td>
                                        <td class="ShoppingFeaturesCol">
                                            <b>Key Features:</b>
                                            <ul>
                                                <li><b>Operating System:</b> {{operatingSystem}}</li>
                                                <li><b>Processor:</b> {{processor}}</li>
                                                <li><b>Screen Resolution:</b> {{resolution}}</li>
                                                <li><b>Camera:</b> {{primaryCamera}}</li>
                                                <li><b>Size:</b> {{size}}</li>
                                                <li><b>Weight:</b> {{weight}}</li>
                                                <li><b>Internal Memory:</b> {{internalMemory}}</li>
                                            </ul>
                                        </td>
                                    </tr>
                                </table>
                        
                                <table cellpadding="10px">
                                    <tr>
                                        <td class="ShoppingBuyNowLeftCol">
                                            <a class="ShoppingBuyNowButton" href="" onclick="return false;">BUY NOW</a>
                                            <br /><br />
                                            Call <b>1800 200 9000 (toll free)</b> for assistance from our product expert.
                                            <hr />
                                            <b>Cash</b> on Delivery
                                            <hr />
                                            <b>EMI</b> Option
                                            <hr />
                                            <b>30 Day</b> Replacement Guarantee
                                            <hr />
                                        </td>
                                        <td class="ShoppingBuyNowRightCol">
                                            <span class="ShopingInStock">In Stock</span>
                                            <br />
                                            Cash-on-Delivery also available
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </column>
            </dataRow>
            <footerRow>
            </footerRow>
        </gridjs>
    </div>
    <br />
    <br />
    <div id="divBoundNorthWind" style="text-align: center; width: 100%;">
        <gridjs id="gridBoundNorthWind" class="NorthWindGrid">
            <headerRow class="NorthWindGridHeaderRow">
                <column><b>Order ID</b></column>
                <column><b>Customer ID</b></column>
                <column><b>Emp ID</b></column>
                <column><b>Order Date</b></column>
                <column><b>Shipped Date</b></column>
                <column><b>Freight</b></column>
                <column><b>Ship Name</b></column>
                <column><b>Ship City</b></column>
                <column><b>Ship Postal Code</b></column>
                <column><b>Ship Country</b></column>
                <column><b>Order Details 1(Id)</b></column>
            </headerRow>
            <dataRow class="NorthWindGridRow">
                <column>
                    <input class="CustomText" type="text" id="txtOrderID" model="{{OrderID}}" />
                </column>
                <column>{{CustomerID}}</column>
                <column>{{EmployeeID}}</column>
                <column>{{GetOrderDate1()}}</column>
                <column>{{GetShippedDate1()}}</column>
                <column>{{Freight}}</column>
                <column>
                    <input class="CustomText" type="text" id="txtShipName" model="{{ShipName}}" />
                </column>
                <column>
                    <input class="CustomText" type="text" id="txtShipCity" model="{{ShipCity}}" />
                </column>
                <column>{{ShipPostalCode}}</column>
                <column>
                    <input class="CustomText" type="text" id="txtShipCountry" model="{{ShipCountry}}" />                   
                </column> 
                <column>
                    <input class="CustomText" type="text" id="Text5" model="{{Order_Details[0].OrderID}}" />                   
                </column>               
            </dataRow>
            <footerRow>
            </footerRow>
        </gridjs>
    </div>
    <br />
    <br />
    <div id="divBoundGridWithValidation" style="text-align: center; width: 100%;">
        <gridjs id="gridBoundGridWithValidation" class="NorthWindValidationGrid">
            <headerRow class="NorthWindValidationGridHeaderRow">
                <column class="NorthWindValidationGridHeaderRowCustomColumn1"><b>Order ID</b></column>
                <column><b>Customer ID</b></column>
                <column><b>Emp ID</b></column>
                <column><b>Order Date</b></column>
                <column><b>Shipped Date</b></column>
                <column><b>Freight</b></column>
                <column><b>Ship Name</b></column>
                <column><b>Ship City</b></column>
                <column><b>Ship Postal Code</b></column>
                <column class="NorthWindValidationGridHeaderRowCustomColumn2"><b>Ship Country</b></column>
            </headerRow>
            <dataRow class="NorthWindValidationGridRow">
                <column>
                    <input class="CustomText" type="text" id="Text1" model="{{OrderID}}" />
                </column>
                <column>{{CustomerID}}</column>
                <column>{{EmployeeID}}</column>
                <column>{{GetOrderDate1()}}</column>
                <column>{{GetShippedDate1()}}</column>
                <column>{{Freight}}</column>
                <column>
                    <input class="CustomText" type="text" id="Text2" model="{{ShipName}}" validatorName ="{{GetShipNameValidator()}}"/>
                    &nbsp;<div validator = "{{GetShipNameValidator()}}"></div>
                </column>
                <column>
                    <input class="CustomText" type="text" id="Text3" model="{{ShipCity}}" validatorName ="{{GetShipCityValidator()}}"/>
                    &nbsp;<div validator = "{{GetShipCityValidator()}}"></div>
                </column>
                <column>{{ShipPostalCode}}</column>
                <column>
                    <input class="CustomText" type="text" id="Text4" model="{{ShipCountry}}" validatorName ="{{GetShipCountryValidator()}}"/>    
                    &nbsp;<div validator = "{{GetShipCountryValidator()}}"></div>               
                </column>                
            </dataRow>
            <footerRow>
            </footerRow>
        </gridjs>
    </div>

    <script type="text/javascript">
        var AddTodo = null,
            ClearAllTodo = null;
        $(document).ready(function () {
            //Bound NorthWind Grid with Validation
            //===============================================================================
            var validationNorthWindGrid,
                vManager,
                shipNameValidatorList = [],
                shipCityValidatorList = [],
                shipCountryValidatorList = [];

            vManager = new ValidationManager()
            .showPassImgNotification(false);

            validationNorthWindGrid = new GridJS({
                gridId: 'gridBoundGridWithValidation',
                dataSource: NorthWindDataSource,
                cellPadding: 6,
                pagination: 10,
                pageButtonCss: { normalCss: 'NorthWindValidationGridButton', activeCss: 'NorthWindValidationActiveButton' },
                onGridLoaded: OnValidationGridLoaded,
                onGridPageChange: OnGridPageChange,
                onRowAddition: onGridRowAdd,
                beforeGridPageChange: BeforeGridPageChange,
                updateDataRowOnInputChange: false
            })
            .addCustomFunction("GetOrderDate1", GetOrderDate1)
            .addCustomFunction("GetShippedDate1", GetShippedDate1)
            .addCustomFunction("GetShipNameValidator", GetShipNameValidator)
            .addCustomFunction("GetShipCityValidator", GetShipCityValidator)
            .addCustomFunction("GetShipCountryValidator", GetShipCountryValidator)
            .draw();

            function BeforeGridPageChange(dataSource, rowIndex) {
                var isValid = vManager.validateAll();
                if (!isValid) validationNorthWindGrid.allowPageChange(false);
                else validationNorthWindGrid.allowPageChange(true);
            }

            function onGridRowAdd(dataRow, dataSource, rowIndex) {
                var shipNameValidator = "valShipName_" + rowIndex,
                 shipCityValidator = "valShipCity_" + rowIndex,
                 shipCountryValidator = "valShipCountry_" + rowIndex;
                shipNameValidatorList.push(shipNameValidator);
                shipCityValidatorList.push(shipCityValidator);
                shipCountryValidatorList.push(shipCountryValidator);

                return dataRow;
            }

            function OnValidationGridLoaded() {
                vManager.addValidator(shipNameValidatorList, [{ type: ValidationType.Required, message: "Ship Name is required." }])
                    .addValidator(shipCityValidatorList, [{ type: ValidationType.Required, message: "Ship City is required." }])
                    .addValidator(shipCountryValidatorList, [{ type: ValidationType.Required, message: "Ship Country is required." }])
                .initialize();
            }

            function OnGridPageChange() {
                //reset the validator lists before grid new page is loaded
                shipNameValidatorList = [];
                shipCityValidatorList = [];
                shipCountryValidatorList = [];
                vManager.clearValidators();
            }

            function GetShipNameValidator(data, rowIndex) {
                return "valShipName_" + rowIndex;
            }

            function GetShipCityValidator(data, rowIndex) {
                return "valShipCity_" + rowIndex;
            }

            function GetShipCountryValidator(data, rowIndex) {
                return "valShipCountry_" + rowIndex;
            }

            //Bound NorthWind Grid
            //===============================================================================
            var boundNorthWindGrid = new GridJS({
                gridId: 'gridBoundNorthWind',
                dataSource: NorthWindDataSource,
                cellPadding: 6,
                pagination: 10,
                pageButtonCss: { normalCss: 'NorthWindPaginationButton', activeCss: '' },
                dataRowColors: ["#0B6121", "#0A2A0A"]
            })
            .addCustomFunction("GetOrderDate1", GetOrderDate1)
            .addCustomFunction("GetShippedDate1", GetShippedDate1)
            .draw();

            //GetOrderDate1
            function GetOrderDate1(data, rowIndex) {
                var date = new Date(Date.parse(data[rowIndex].OrderDate)),
                    month = date.getMonth(),
                    day = date.getDate(),
                    year = date.getYear();
                return month + "/" + day + "/" + year;
            }

            //GetShippedDate1
            function GetShippedDate1(data, rowIndex) {
                var date = new Date(Date.parse(data[rowIndex].ShippedDate)),
                    month = date.getMonth(),
                    day = date.getDate(),
                    year = date.getYear();
                return month + "/" + day + "/" + year;
            }
            //===============================================================================


            //Shopping Grid
            //===============================================================================
            var shoppingGrid = new GridJS({
                gridId: 'gridShopping',
                dataSource: ShoppingDataSource,
                cellPadding: 8,
                pagination: 1,
                pageButtonCss: { normalCss: 'ShoppingPaginationButton', activeCss: 'ShoppingPaginationActiveButton' }
            })
            .addCustomFunction("PriceAfterDiscount", priceAfterDiscount)
            .draw();

            //function to get price after discount
            function priceAfterDiscount(data, rowIndex) {
                var price = data[rowIndex].price;
                var discount = data[rowIndex].discount;

                return price - ((price * discount) / 100);
            }

            //===============================================================================

            //Northwind grid
            //===============================================================================
            var northWindGrid = new GridJS({
                gridId: 'gridNorthWind',
                dataSource: NorthWindDataSource,
                cellPadding: 6,
                pagination: 10,
                pageButtonCss: { normalCss: 'NorthWindPaginationButton', activeCss: '' },
                dataRowColors: ["#0B6121", "#0A2A0A"]
            })
            .addCustomFunction("GetOrderDate", function (data, rowIndex) {
                var date = new Date(Date.parse(data[rowIndex].OrderDate)),
                    month = date.getMonth(),
                    day = date.getDate(),
                    year = date.getYear();
                return month + "/" + day + "/" + year;
            })
            .addCustomFunction("GetShippedDate", function (data, rowIndex) {
                var date = new Date(Date.parse(data[rowIndex].ShippedDate)),
                    month = date.getMonth(),
                    day = date.getDate(),
                    year = date.getYear();
                return month + "/" + day + "/" + year;
            })
            .draw();

            //===============================================================================

            //Country grid
            //===============================================================================
            var countryGrid = new GridJS({
                gridId: 'gridCountry',
                dataSource: CountryDataSource,
                cellPadding: 8,
                dataRowColors: ["#F8FBEF", "#EFF5FB"]
            })
            .draw();

            //===============================================================================

            //TODO app object
            //===============================================================================
            var todoGrid,
                todo = function (t, d) {
                    this.title = t;
                    this.done = d;
                },
                todoList = [],
                $txtTodo = $("#txtTodo");

            AddTodo = function () {
                todoList.push(new todo($txtTodo.val(), ""));
                todoGrid.reDraw();
                $txtTodo.val("");
            }

            ClearAllTodo = function () {
                todoList.length = 0;
                todoGrid.reDraw();
            }

            todoGrid = new GridJS({
                gridId: 'todoGrid',
                dataSource: todoList,
                dataRowColors: ["#FFFFFF", "#FBEFFB", "#EFF8FB", "#FBFBEF", "#FBEFEF"],
                mouseOverColor: '#FFC1C1',
                pagination: 10
            })
            .addCustomFunction("GetTodoStatus", function (data, rowIndex) {
                if (data[rowIndex]["done"] === true) { return "Done"; }
                else { return "Normal"; }
            })
            .draw();

            //================================================================================
        });
    </script>
</body>
</html>
